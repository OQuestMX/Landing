```html
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO y Metadatos -->
  <title>Eduardo Taylor Elizondo — Consultoría para navegar la complejidad</title>
  <meta name="description" content="Consultoría estratégica en Monterrey. Aplico marcos de complejidad como Cynefin y Wardley Maps para resolver problemas organizacionales y desarrollar talento.">
  <link rel="canonical" href="https://tudominio.mx/">
  <meta name="robots" content="index,follow">
  <meta name="theme-color" content="#004B87">

  <!-- Open Graph -->
  <meta property="og:title" content="Eduardo Taylor Elizondo — Consultoría, Complejidad y Juegos Serios">
  <meta property="og:description" content="Consultoría estratégica para resolver problemas organizacionales reales.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="img/og-placeholder.png">
  <meta property="og:url" content="https://tudominio.mx/">
  <meta property="og:locale" content="es_MX">

  <!-- CSP (permite inline para este prototipo) -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https: data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; connect-src 'self'; frame-ancestors 'none'; base-uri 'self'">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="img/favicon.png" sizes="32x32" />

  <!-- Estilos CSS -->
  <style>
    :root{
      --white:#FFFFFF; --background-alt:#f0f4f8; --text:#111111;
      --blue:#004B87; --blue-hover:#0074CC; --blue-soft:#D0E4F2;
      --lines-borders:#8AA8BD; --retro-accent:#008080;
      --font-family-sans:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,"Noto Sans","Liberation Sans",sans-serif;
      --font-family-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,"Courier New",Courier,monospace;
      --font-bismarck-body:"Hoefler Text","Baskerville Old Face",Garamond,"Times New Roman",serif;
      --font-bismarck-title:"Palatino Linotype","Book Antiqua",Palatino,serif;
      --bismarck-accent:#c5a880; --bismarck-text-light:#e0dace;
    }

    *, *::before, *::after { box-sizing: border-box; }

    html { scroll-behavior: smooth; scroll-padding-top: 56px; }

    body {
      background-color: var(--white);
      color: var(--text);
      font-family: var(--font-family-sans);
      margin: 0;
      line-height: 1.7;
    }

    body.modal-open { overflow: hidden; }

    body::after {
      content: "";
      position: fixed; inset: 0;
      width: 100vw; height: 100vh;
      background: repeating-linear-gradient(0deg, rgba(0,0,0,0.05), rgba(0,0,0,0.05) 1px, transparent 1px, transparent 2px);
      pointer-events: none;
      z-index: 100; /* debajo del modal */
    }

    .container { max-width: 960px; margin: 0 auto; padding: 0 20px; }

    section { padding: 64px 20px; border-bottom: 1px solid var(--lines-borders); }

    main > section:nth-of-type(even) { background-color: var(--background-alt); }

    h1, h2, h3, h4 { margin: 0 0 1rem; line-height: 1.2; color: var(--blue); font-family: var(--font-family-mono); }
    h1 { font-size: 2.2rem; } h2 { font-size: 1.5rem; } h3 { font-size: 1.15rem; } h4 { font-size: 1rem; color: var(--text); }

    a { color: var(--blue); text-decoration: underline; text-decoration-thickness: 1px; transition: color .2s, text-decoration-color .2s, text-decoration-thickness .2s; }
    a:hover, a:focus-visible { color: var(--blue-hover); text-decoration-color: var(--blue-hover); text-decoration-thickness: 2px; outline: none; }

    /* Header y Navegación */
    .site-header { background-color: var(--white); border-bottom: 2px solid var(--text); height: 56px; position: sticky; top: 0; z-index: 1000; }
    .header-container { display: flex; justify-content: space-between; align-items: center; height: 100%; gap: 20px; }
    .logo a { font-size: 1.25rem; font-weight: bold; text-decoration: none; color: var(--text); font-family: var(--font-family-mono); line-height: 1.2; }
    .main-nav ul { list-style: none; margin: 0; padding: 0; display: flex; gap: 16px; flex-shrink: 0; }
    .main-nav a { text-decoration: none; position: relative; padding-bottom: 4px; font-family: var(--font-family-mono); }
    .main-nav a::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 2px; background-color: var(--retro-accent); transform: scaleX(0); transform-origin: left; transition: transform .3s ease-in-out; }
    .main-nav a:hover::after, .main-nav a:focus-visible::after { transform: scaleX(1); }
    #bismarck-nav-link { border: 1px solid var(--bismarck-accent); color: var(--bismarck-accent); padding: 2px 6px; border-radius: 2px; }

    .page-wrapper { transition: opacity .3s ease-in-out; }
    .page-wrapper.hidden { display: none; }

    /* Hero / Quién Soy */
    #quien-soy { padding-top: 48px; padding-bottom: 48px; }
    .intro-layout { display: flex; flex-direction: column; gap: 48px; }
    .intro-title-area { flex: 1; }
    .intro-bio-area { flex: 1.5; }
    #hero-title { position: relative; min-height: 1.2em; }
    #hero-title.typing::after { content: '▌'; position: absolute; right: -0.2em; color: var(--blue); animation: blink 1s step-end infinite; }
    .intro-title-area .subtitle { font-size: 1.1rem; color: var(--text); margin-top: 0.5rem; max-width: 40ch; }
    .separator { width: 100%; height: 2px; margin-top: 2rem; background: linear-gradient(90deg, var(--retro-accent), transparent, var(--blue)); }
    @keyframes blink { 50% { opacity: 0; } }
    .section-title { margin-bottom: 24px; }
    .section-title::after { content: '▌'; display: inline-block; margin-left: 8px; color: var(--blue); animation: blink 1s step-end infinite; }
    .quien-soy-content-simplified { font-size: 1.1rem; }
    .footnote-ref { font-weight: bold; color: var(--retro-accent); cursor: help; text-decoration: underline dotted; }

    /* Footnotes */
    .footnotes-section { background-color: var(--text); color: var(--white); position: sticky; bottom: 0; z-index: 500; padding: 16px 20px; min-height: 80px; border-top: 2px solid var(--retro-accent); }
    .footnotes-section h4 { color: var(--white); }
    .footnote-display { font-family: var(--font-family-mono); color: var(--blue-soft); min-height: 1.5em; transition: color .2s; }
    .footnote-display:empty::before { content: "Pasa el cursor o enfoca un número para ver la nota..."; color: var(--lines-borders); opacity: 0.7; }

    /* Lo Que Hago */
    .services-layout { display: flex; flex-direction: column; gap: 32px; margin-top: 24px; }
    .services-menu { list-style: none; padding: 0; margin: 0; flex-shrink: 0; }
    .services-menu li a { display: block; padding: 12px 16px; text-decoration: none; font-family: var(--font-family-mono); border: 1px solid transparent; border-left: 3px solid var(--lines-borders); transition: all .2s ease-out; }
    .services-menu li a:hover { background-color: var(--blue-soft); border-left-color: var(--blue-hover); }
    .services-menu li a.active { background-color: var(--white); border-color: var(--lines-borders); border-left-color: var(--retro-accent); box-shadow: 2px 2px 0 var(--lines-borders); transform: translateX(4px); }
    .service-panel { background-color: var(--white); border: 1px solid var(--lines-borders); padding: 24px; min-height: 300px; opacity: 0; transform: translateX(20px); transition: opacity .4s ease, transform .4s ease; }
    .service-panel.active { opacity: 1; transform: translateX(0); }
    .service-panel[aria-live="polite"] { outline: none; }
    .service-panel-content ul { padding-left: 20px; }
    .service-panel-content h3 { margin-top: 0; }

    /* Contacto */
    .contact-layout { display: flex; gap: 24px; margin-top: 24px; }
    .contact-icon-area { flex: 0 0 20%; display: flex; justify-content: center; align-items: center; border-right: 1px solid var(--lines-borders); padding-right: 24px; }
    .contact-icon-link svg { width: 60px; height: auto; fill: var(--lines-borders); transition: fill .2s ease, transform .2s ease; }
    .contact-icon-link:hover svg { fill: var(--retro-accent); transform: scale(1.05); }
    .contact-form-wrapper { flex: 1 1 80%; }
    #contact-form { display: grid; gap: 16px 24px; grid-template-areas: "name email" "message message" "verticals verticals" "actions actions"; }
    .form-group { margin: 0; }
    .form-group-name { grid-area: name; }
    .form-group-email { grid-area: email; }
    .form-group-message { grid-area: message; }
    .form-group-verticals { grid-area: verticals; }
    .form-actions { grid-area: actions; }
    .form-group label { display: block; margin-bottom: .5rem; font-weight: bold; }
    .form-group input, .form-group textarea { width: 100%; padding: 8px; font-family: var(--font-family-mono); border: 1px solid var(--lines-borders); background-color: var(--white); color: var(--text); font-size: 1rem; }
    .form-group input:focus-visible, .form-group textarea:focus-visible { outline: 2px solid var(--retro-accent); outline-offset: 1px; border-color: var(--retro-accent); }
    .checkbox-grid { display: flex; flex-wrap: wrap; gap: 8px 16px; padding-top: 8px; }
    .checkbox-item { display: flex; align-items: center; }
    .checkbox-item input[type="checkbox"]{ margin-right: 8px; width: 16px; height: 16px; accent-color: var(--blue); }
    .checkbox-item label { margin-bottom: 0; font-weight: normal; }
    .form-actions { display: flex; gap: 16px; flex-wrap: wrap; align-items: center; }
    .btn { padding: 10px 16px; font-family: var(--font-family-mono); font-size: 1rem; border: 2px solid var(--text); cursor: pointer; transition: all .2s; box-shadow: 2px 2px 0 var(--text); text-decoration: none; display: inline-block; }
    .btn:hover, .btn:focus-visible { box-shadow: 4px 4px 0 var(--text); transform: translate(-1px,-1px); }
    .btn:active { box-shadow: 0 0 0 var(--text); transform: translate(2px,2px); }
    .btn-primary { background-color: var(--blue); color: var(--white); }
    .btn-ghost { background-color: transparent; color: var(--blue); border-color: var(--blue); }

    /* Footer */
    .site-footer-main { padding: 24px 0; background-color: var(--background-alt); border-bottom: 0; }
    .footer-content { display: flex; justify-content: center; align-items: center; }

    /* Modal genérico */
    .modal { position: fixed; inset: 0; background-color: rgba(0,0,0,0.2); display: flex; justify-content: center; align-items: center; z-index: 2000; opacity: 0; pointer-events: none; transition: opacity .3s ease-in-out; }
    .modal.active { opacity: 1; pointer-events: auto; }
    .modal-content { background-color: var(--background-alt); padding: 32px; border: 2px solid var(--text); box-shadow: 8px 8px 0 var(--retro-accent); max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; position: relative; }
    .modal-close-btn { position: absolute; top: 10px; right: 10px; background: none; border: none; font-family: var(--font-family-mono); font-size: 1.5rem; cursor: pointer; color: var(--text); }
    .modal-body h3 { margin-top: 0; }
    .modal-body ul { padding-left: 20px; }

    /* Bismarck */
    #bismarck-page { background-color: #1a1a1a; color: var(--bismarck-text-light); font-family: var(--font-bismarck-body); min-height: 100vh; position: relative; padding-left: 180px; }
    #bismarck-page h3, #bismarck-page h4, #bismarck-page h5 { font-family: var(--font-bismarck-title); color: #fff; }
    #bismarck-page h3 { font-size: 2.5rem; margin-bottom: .5rem; }
    #bismarck-page h4 { font-size: 1.1rem; border-bottom: 1px solid var(--lines-borders); padding-bottom: 8px; margin-bottom: 16px; }
    #bismarck-page h5 { font-size: 1rem; margin-bottom: .5rem; }
    .bismarck-subtitle { font-style: italic; margin: 0 0 2rem; opacity: .8; }
    #bismarck-page p, #bismarck-page li, #bismarck-page blockquote { font-size: 1.1rem; line-height: 1.8; }
    .bismarck-tabs { position: fixed; top: 0; left: 0; height: 100vh; width: 180px; background-color: #111; border-right: 2px solid var(--bismarck-accent); display: flex; flex-direction: column; justify-content: center; z-index: 10; }
    .bismarck-tab { background: transparent; border: none; color: var(--bismarck-text-light); padding: 15px; cursor: pointer; transition: background-color .2s, color .2s; font-family: var(--font-bismarck-title); display: flex; align-items: center; gap: 10px; }
    .bismarck-tab.active, .bismarck-tab:hover { background: var(--bismarck-accent); color: #fff; }
    .bismarck-tab svg { width: 24px; height: 24px; fill: currentColor; }
    .bismarck-panel-container { position: relative; min-height: 100vh; }
    .bismarck-panel { position: absolute; top: 0; left: 0; width: 100%; height: 100%; padding: 3rem; opacity: 0; pointer-events: none; transform: translateX(-20px); transition: opacity .4s ease, transform .4s ease; overflow-y: auto; }
    .bismarck-panel.active { opacity: 1; pointer-events: auto; transform: translateX(0); }
    .bismarck-gallery-image { width: 100%; max-width: 400px; height: auto; border: 2px solid var(--bismarck-text-light); cursor: pointer; display: block; margin: 0 auto; }
    .bismarck-gallery-caption { font-size: .9rem; text-align: center; margin-top: 8px; font-style: italic; }
    .bismarck-book-item { border-bottom: 1px solid var(--lines-borders); padding-bottom: 1rem; margin-bottom: 1rem; }
    .bismarck-book-item:last-child { border-bottom: none; }
    .bismarck-book-item .bismarck-book-title { font-weight: bold; color: var(--bismarck-text-light); }
    .bismarck-book-item .bismarck-book-author { font-size: .9rem; opacity: .8; display: block; margin-bottom: .5rem; }
    .bismarck-book-quote { font-style: italic; border-left: 2px solid var(--bismarck-accent); padding-left: 1rem; margin-top: 1rem; }
    .bismarck-panel a { color: var(--bismarck-accent); text-decoration: none; border-bottom: 1px dotted var(--bismarck-accent); }
    .bismarck-panel a:hover { color: var(--bismarck-text-light); }

    /* Modal imagen fullscreen */
    #image-modal { background-color: rgba(0,0,0,0.85); }
    #image-modal .modal-content { background: none; border: none; box-shadow: none; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; padding: 2rem; }
    #image-modal img { max-width: 100%; max-height: 100%; object-fit: contain; }
    #image-modal .modal-close-btn { color: white; font-size: 2.5rem; text-shadow: 0 0 5px black; }

    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

    /* Responsive */
    @media (max-width: 720px) {
      .contact-layout { flex-direction: column; }
      .contact-icon-area { border-right: none; border-bottom: 1px solid var(--lines-borders); padding-right: 0; padding-bottom: 24px; }
      #contact-form { grid-template-areas: "name" "email" "message" "verticals" "actions"; }
      #bismarck-page { padding-left: 0; }
      .bismarck-tabs { position: relative; width: 100%; height: auto; flex-direction: row; justify-content: center; border-right: none; border-bottom: 2px solid var(--bismarck-accent); }
      .bismarck-tab { writing-mode: horizontal-tb; transform: none; }
      .bismarck-tab span { display: none; }
    }
    @media (max-width: 600px) {
      .logo a { font-size: 1rem; }
      .main-nav ul { gap: 10px; }
      .main-nav a { font-size: .9rem; }
    }
    @media (min-width: 720px) {
      .main-nav ul { gap: 24px; }
      .services-layout { flex-direction: row; align-items: flex-start; }
      .services-menu { width: 300px; }
      .service-panel { flex-grow: 1; }
      .intro-layout { flex-direction: row; align-items: flex-start; }
    }

    /* Reduce motion */
    @media (prefers-reduced-motion: reduce) {
      * { animation-duration: .001ms !important; animation-iteration-count: 1 !important; transition-duration: .001ms !important; scroll-behavior: auto !important; }
    }
  </style>
</head>
<body>
  <div id="main-content" class="page-wrapper">
    <header class="site-header">
      <div class="container header-container">
        <div class="logo"><a href="#">Eduardo Taylor Elizondo</a></div>
        <nav class="main-nav" aria-label="Principal">
          <ul>
            <li><a href="#quien-soy">Quién soy</a></li>
            <li><a href="#lo-que-hago">Lo que hago</a></li>
            <li><a href="#contacto">Contacto</a></li>
            <li><a href="#" id="book-nav-link">Libro</a></li>
            <li><a href="#" id="bismarck-nav-link">The Bismarck</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main>
      <section id="quien-soy" class="container">
        <div class="intro-layout">
          <div class="intro-title-area">
            <h1 id="hero-title">Consultoría para navegar la complejidad.</h1>
            <p class="subtitle">Estrategia, talento y decisiones en entornos de alta incertidumbre.</p>
            <div class="separator"></div>
          </div>
          <div class="intro-bio-area">
            <h2 class="section-title">Quién soy</h2>
            <div class="quien-soy-content-simplified">
              <p>
                Consultor regiomontano que aplica diagramas epistemo-ontológicos
                <sup><span class="footnote-ref" data-footnote="1" tabindex="0">1</span></sup>
                a problemas corporativos complejos. Combino un trasfondo en filosofía
                <sup><span class="footnote-ref" data-footnote="2" tabindex="0">2</span></sup>
                con un MBA
                <sup><span class="footnote-ref" data-footnote="7" tabindex="0">7</span></sup>
                para sintetizar la entropía organizacional.
                <sup><span class="footnote-ref" data-footnote="8" tabindex="0">8</span></sup>
                Mi trabajo se centra en arrastrar conceptos abstractos hacia la implementación práctica
                <sup><span class="footnote-ref" data-footnote="3" tabindex="0">3</span></sup>,
                con un portafolio que va de la consultoría a franquicias educativas basadas en juegos de rol.
                <sup><span class="footnote-ref" data-footnote="4" tabindex="0">4</span></sup>
              </p>
            </div>
          </div>
        </div>
      </section>

      <section id="lo-que-hago" class="container">
        <h2 id="lo-que-hago-title" class="section-title">Lo que hago</h2>
        <div class="services-layout">
          <ul class="services-menu">
            <li><a href="#" data-service-target="service-1">Transformación y Complejidad</a></li>
            <li><a href="#" data-service-target="service-2">Talento Estratégico</a></li>
            <li><a href="#" data-service-target="service-3">Aceleración y Colisión</a></li>
            <li><a href="#" data-service-target="service-4">Productos Intelectuales</a></li>
            <li><a href="#" data-service-target="service-5">Educación y Desarrollo</a></li>
          </ul>
          <div class="service-panel" aria-live="polite"><!-- contenido por JS --></div>
        </div>
      </section>

      <section id="contacto" class="container">
        <h2 id="contacto-title" class="section-title">¿Cafecito?</h2>
        <div class="contact-layout">
          <div class="contact-icon-area">
            <a href="https://linktr.ee/etaylor88" target="_blank" rel="noopener noreferrer" class="contact-icon-link" title="Ver más enlaces">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.11 0 2-.89 2-2V5c0-1.11-.89-2-2-2zm0 5h-2V5h2v3zM4 19h16v2H4z"/></svg>
            </a>
          </div>
          <div class="contact-form-wrapper">
            <form id="contact-form" novalidate>
              <div class="form-group form-group-name">
                <label for="nombre">Nombre</label>
                <input type="text" id="nombre" name="nombre" required autocomplete="name" maxlength="120">
              </div>
              <div class="form-group form-group-email">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" required autocomplete="email" inputmode="email" maxlength="254">
              </div>
              <div class="form-group form-group-message">
                <label for="mensaje">Mensaje (Opcional)</label>
                <textarea id="mensaje" name="mensaje" rows="3" maxlength="2000"></textarea>
              </div>
              <div class="form-group form-group-verticals">
                <label>Verticales de interés</label>
                <div class="checkbox-grid">
                  <div class="checkbox-item"><input type="checkbox" id="v1" name="vertical" value="Transformación"><label for="v1">Transformación <sup><span class="footnote-ref" data-footnote="11" tabindex="0">11</span></sup></label></div>
                  <div class="checkbox-item"><input type="checkbox" id="v2" name="vertical" value="Talento"><label for="v2">Talento <sup><span class="footnote-ref" data-footnote="12" tabindex="0">12</span></sup></label></div>
                  <div class="checkbox-item"><input type="checkbox" id="v3" name="vertical" value="Aceleración"><label for="v3">Aceleración <sup><span class="footnote-ref" data-footnote="13" tabindex="0">13</span></sup></label></div>
                  <div class="checkbox-item"><input type="checkbox" id="v4" name="vertical" value="Productos"><label for="v4">Productos <sup><span class="footnote-ref" data-footnote="14" tabindex="0">14</span></sup></label></div>
                  <div class="checkbox-item"><input type="checkbox" id="v5" name="vertical" value="Educación"><label for="v5">Educación <sup><span class="footnote-ref" data-footnote="15" tabindex="0">15</span></sup></label></div>
                </div>
              </div>
              <div class="form-actions">
                <button type="submit" class="btn btn-primary">Enviar</button>
                <button type="button" id="preview-btn" class="btn btn-ghost">Previsualizar</button>
              </div>
            </form>
          </div>
        </div>
      </section>
    </main>

    <section id="footnotes" class="footnotes-section" aria-live="polite">
      <div class="container">
        <h4>Notas al pie:</h4>
        <p id="footnote-display" class="footnote-display"></p>
      </div>
    </section>

    <footer class="site-footer-main">
      <div class="container footer-content"></div>
    </footer>
  </div>

  <!-- Vista Bismarck -->
  <div id="bismarck-page" class="page-wrapper hidden" aria-labelledby="bismarck-title">
    <header class="site-header">
      <div class="container header-container">
        <div class="logo"><a href="#" id="bismarck-back-btn">&lt; Volver</a></div>
      </div>
    </header>
    <h1 id="bismarck-title" class="sr-only">The Bismarck</h1>

    <div class="bismarck-container">
      <nav class="bismarck-tabs" role="tablist" aria-label="Secciones Bismarck">
        <button class="bismarck-tab" role="tab" aria-controls="panel-gallery" aria-selected="true" data-bismarck-tab="gallery">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 16V4c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2zm-8.5-6.5l2.5 3.01L18.5 12l-5.01 6.01L9 13l-3 4h12l-3.5-4.5z"/></svg>
          <span>La Galería</span>
        </button>
        <button class="bismarck-tab" role="tab" aria-controls="panel-library" aria-selected="false" data-bismarck-tab="library">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9H9V9h10v2zm-4 4H9v-2h6v2zm4-8H9V5h10v2z"/></svg>
          <span>La Biblioteca</span>
        </button>
        <button class="bismarck-tab" role="tab" aria-controls="panel-lab" aria-selected="false" data-bismarck-tab="lab">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3c-1.1 0-2 .9-2 2v2.05c-1.54.4-2.82 1.4-3.54 2.71L4.22 9.22c-.39.39-.39 1.02 0 1.41l2.12 2.12c.39.39 1.02.39 1.41 0l2.24-.56c.32-.08.66-.12 1 .12.34.24.5.64.5 1.06V17c0 .55.45 1 1 1s1-.45 1-1v-3.65c0-.42.16-.82.5-1.06.34-.24.78-.2 1.1-.12l2.24.56c.39.39 1.02.39 1.41 0l2.12-2.12c.39-.39.39-1.02 0-1.41l-2.24-2.24C16.82 6.45 15.54 5.45 14 5.05V5c0-1.1-.9-2-2-2zm0 5c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3z"/></svg>
          <span>El Laboratorio</span>
        </button>
        <button class="bismarck-tab" role="tab" aria-controls="panel-poem" aria-selected="false" data-bismarck-tab="poem">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"/></svg>
          <span>El Poema</span>
        </button>
        <button class="bismarck-tab" role="tab" aria-controls="panel-vinyl" aria-selected="false" data-bismarck-tab="vinyl">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5zm0-11C9.24 5.5 6.5 8.24 6.5 11.5c0 .63.1 1.24.29 1.81l-2.6 2.6c-.32.32-.32.85 0 1.17.16.16.37.24.59.24s.43-.08.59-.24l2.6-2.6C9.26 15.4 9.87 15.5 10.5 15.5c3.26 0 5.99-2.74 5.99-6s-2.73-6-5.99-6z"/></svg>
          <span>El Vinil</span>
        </button>
        <button class="bismarck-tab" role="tab" aria-controls="panel-task-manager" aria-selected="false" data-bismarck-tab="task-manager">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/></svg>
          <span>Task Manager</span>
        </button>
      </nav>

      <div class="bismarck-panel-container">
        <div class="bismarck-panel" id="panel-gallery" role="tabpanel" tabindex="0" data-bismarck-panel="gallery">
          <h3>La Galería</h3>
          <p>Una obra que captura la totalidad de la experiencia humana: la inocencia, la tentación, la consecuencia y el caos.<sup><span class="footnote-ref" data-footnote="16" tabindex="0">16</span></sup> Es un mapa de sistemas de un mundo que apenas comenzaba a sospechar su propia complejidad.</p>
          <figure>
            <img loading="lazy" decoding="async" width="400" src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/El_jard%C3%ADn_de_las_Delicias%2C_de_El_Bosco.jpg/1280px-El_jard%C3%ADn_de_las_Delicias%2C_de_El_Bosco.jpg" alt="El Jardín de las Delicias de El Bosco" class="bismarck-gallery-image">
            <figcaption class="bismarck-gallery-caption"><em>El Jardín de las Delicias</em>, El Bosco (c. 1490-1500)</figcaption>
          </figure>
        </div>

        <div class="bismarck-panel" id="panel-library" role="tabpanel" tabindex="0" data-bismarck-panel="library">
          <h3>La Biblioteca</h3>
          <ul>
            <li class="bismarck-book-item">
              <span class="bismarck-book-title"><em>Simulacra and Simulation</em></span>
              <span class="bismarck-book-author">Jean Baudrillard</span>
              <p class="bismarck-book-quote">"El simulacro no es nunca aquello que esconde la verdad —es la verdad la que esconde que no hay ninguna. El simulacro es verdadero."<sup><span class="footnote-ref" data-footnote="20" tabindex="0">20</span></sup></p>
            </li>
            <li class="bismarck-book-item">
              <span class="bismarck-book-title"><em>The Crying of Lot 49</em></span>
              <span class="bismarck-book-author">Thomas Pynchon</span>
              <p class="bismarck-book-quote">"Detrás de la trama que imaginas, se esconde otra trama."<sup><span class="footnote-ref" data-footnote="21" tabindex="0">21</span></sup></p>
            </li>
            <li class="bismarck-book-item">
              <span class="bismarck-book-title"><em>Ways of Seeing</em></span>
              <span class="bismarck-book-author">John Berger</span>
              <p class="bismarck-book-quote">"La forma en que vemos las cosas está afectada por lo que sabemos o lo que creemos."<sup><span class="footnote-ref" data-footnote="22" tabindex="0">22</span></sup></p>
            </li>
          </ul>
        </div>

        <div class="bismarck-panel" id="panel-lab" role="tabpanel" tabindex="0" data-bismarck-panel="lab">
          <h3>El Laboratorio</h3>
          <h5>Experimentos Mentales</h5>
          <ul>
            <li>¿Y si un organigrama se basara en la velocidad del flujo de información?</li>
            <li>Un "anti-MBA" que enseñe a hacer mejores preguntas.</li>
            <li>La "deuda organizacional" como partida contable.</li>
          </ul>
          <h5 style="margin-top: 2rem;">Iteraciones</h5>
          <p>Actualmente desarrollando un juego de rol (RPG) de mesa diseñado para el desarrollo de habilidades socioemocionales en equipos ejecutivos. Utiliza la narrativa y la toma de decisiones en un entorno de fantasía para revelar y entrenar la colaboración, la comunicación y el liderazgo en el mundo real.</p>
        </div>

        <div class="bismarck-panel" id="panel-poem" role="tabpanel" tabindex="0" data-bismarck-panel="poem">
          <h3>El Poema</h3>
          <h4>The Love Song of J. Alfred Prufrock</h4>
          <blockquote style="font-style: italic; border-left: 2px solid var(--bismarck-accent); padding-left: 1rem;">
            <p>No, no soy el príncipe Hamlet, ni estaba destinado a serlo;<br>soy un lord auxiliar, uno que servirá<br>para aumentar un cortejo, iniciar una escena o dos...<sup><span class="footnote-ref" data-footnote="17" tabindex="0">17</span></sup></p>
            <p>¿Me atreveré a alterar el universo?<br>En un minuto hay tiempo para decisiones y revisiones<br>que un minuto revertirá.<sup><span class="footnote-ref" data-footnote="18" tabindex="0">18</span></sup></p>
            <p>He medido mi vida con cucharillas de café...<sup><span class="footnote-ref" data-footnote="19" tabindex="0">19</span></sup></p>
            <footer>— T.S. Eliot</footer>
          </blockquote>
        </div>

        <div class="bismarck-panel" id="panel-vinyl" role="tabpanel" tabindex="0" data-bismarck-panel="vinyl">
          <h3>El Vinil</h3>
          <h4>King Crimson - 21st Century Schizoid Man</h4>
          <p>La banda sonora perfecta para el colapso de la modernidad. Publicada en 1969, esta canción no es rock progresivo; es una crisis nerviosa de 7 minutos capturada en cinta. Con su caos instrumental, letras distópicas y agresión pura, encapsula la ansiedad de un mundo que se acelera más allá de su propia comprensión. Es el sonido de la complejidad volviéndose violenta.</p>
        </div>

        <div class="bismarck-panel" id="panel-task-manager" role="tabpanel" tabindex="0" data-bismarck-panel="task-manager">
          <h3><a href="https://oquestmx.github.io/OfficeQuest1/" target="_blank" rel="noopener noreferrer">Task Manager (beta)</a></h3>
          <p>Una herramienta en desarrollo para la gestión de proyectos y tareas basada en los principios de la complejidad.</p>
        </div>
      </div>
    </div>

    <section id="bismarck-footnotes" class="footnotes-section hidden" aria-live="polite">
      <div class="container">
        <h4>Notas al pie:</h4>
        <p id="bismarck-footnote-display" class="footnote-display"></p>
      </div>
    </section>
  </div>

  <!-- Modal / Pop-up Structure -->
  <div class="modal" id="main-modal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <button class="modal-close-btn" aria-label="Cerrar">&times;</button>
      <div class="modal-body">
        <h3 id="modal-title" class="sr-only">Diálogo</h3>
      </div>
    </div>
  </div>

  <!-- Modal para Imagen Fullscreen -->
  <div class="modal" id="image-modal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true" aria-label="Imagen ampliada">
      <button class="modal-close-btn" aria-label="Cerrar">&times;</button>
      <img src="" alt="Vista ampliada de la obra de arte">
    </div>
  </div>

  <!-- Contenido para las Notas al Pie (oculto) -->
  <div id="footnote-contents" style="display: none;">
    <p data-footnote="1">Relativo a la naturaleza del conocimiento (epistemología) y del ser (ontología). En la práctica, significa clasificar problemas según si sus causas son conocidas o desconocidas, para poder actuar en consecuencia.</p>
    <p data-footnote="2">Una formación en filosofía y literatura que aporta una capacidad (ojalá) superior para la síntesis y el pensamiento crítico, en contraste con el enfoque puramente instrumental de los negocios.</p>
    <p data-footnote="3">La habilidad de mover ideas desde el plano conceptual hasta la implementación, con una alta tolerancia a la experimentación y a la iteración en ciclos rápidos. La estrategia sin ejecución es alucinación.</p>
    <p data-footnote="4">Una exploración de las convergencias entre filosofía, teoría de sistemas, antropología, gamificación y negocios. Se manifiesta en proyectos que van desde la innovación en consultoría hasta franquicias educativas.</p>
    <p data-footnote="5">La incertidumbre no es un bug, es una feature del sistema. Las estrategias deben diseñarse con esto en mente, favoreciendo la adaptabilidad sobre la predicción rígida.</p>
    <p data-footnote="6">No son "dinámicas de grupo". Son simulaciones diseñadas para revelar los modelos mentales y los puntos de fricción de un equipo en un entorno de bajo riesgo y alto aprendizaje.</p>
    <p data-footnote="7">El Master of Business Administration. Un mal necesario para traducir ideas filosóficas al lenguaje del capital y las hojas de cálculo.</p>
    <p data-footnote="8">El desorden inherente y la falta de información clara en una organización. Mi trabajo es reducirla o, al menos, hacerla navegable.</p>
    <p data-footnote="9">El headhunting tradicional busca llenar una vacante existente. Yo busco entender la estrategia para definir la vacante que *debería* existir en 6-12 meses.</p>
    <p data-footnote="10">El objetivo es que mi conocimiento no se vaya conmigo. Se queda en la organización como un sistema que pueden seguir utilizando y mejorando.</p>
    <p data-footnote="11">Navegar cambios organizacionales profundos, desde reestructuras hasta la adopción de nuevas tecnologías o modelos de negocio.</p>
    <p data-footnote="12">Atraer, retener y desarrollar a las personas clave que impulsan la estrategia de la empresa.</p>
    <p data-footnote="13">Romper la inercia y generar movimiento en equipos o proyectos estancados a través de intervenciones focalizadas.</p>
    <p data-footnote="14">Codificar el 'know-how' de la empresa en activos reutilizables como manuales, modelos o software.</p>
    <p data-footnote="15">Elevar la capacidad del liderazgo y los equipos para pensar de manera más estratégica y sistémica.</p>
    <p data-footnote="16">Cada panel del tríptico es un dominio de Cynefin: el orden simple del Edén, el complejo caos del Jardín y el desorden caótico del Infierno.</p>
    <p data-footnote="17">Una alusión a la parálisis del actor secundario en la propia vida, un sentimiento común en la burocracia corporativa.</p>
    <p data-footnote="18">La ansiedad moderna ante la toma de decisiones en un mundo saturado de opciones y la conciencia de que cualquier elección puede ser deshecha o volverse irrelevante rápidamente.</p>
    <p data-footnote="19">Una metáfora de una vida vivida en pequeñas dosis, en rituales triviales y sociales, en lugar de grandes gestos heroicos. El equivalente a medir el éxito en reuniones de Zoom.</p>
    <p data-footnote="20">La idea central de Baudrillard: en la posmodernidad, ya no hay una realidad original que las copias (simulacros) representen. Los signos y las imágenes se refieren solo a otros signos, creando nuestra única realidad.</p>
    <p data-footnote="21">La esencia de la paranoia posmoderna de Pynchon. La búsqueda de una conspiración puede ser la conspiración en sí misma; la necesidad de encontrar un patrón nos hace ver patrones en todas partes, sean reales o no.</p>
    <p data-footnote="22">El argumento de Berger de que no existe una forma "inocente" de ver. Cada acto de visión está mediado por nuestras suposiciones culturales, prejuicios y la historia del poder. Ver es un acto político.</p>
  </div>

  <!-- Contenido para el Modal "Libro del Momento" (oculto) -->
  <div id="book-modal-content" style="display:none;">
    <h3>Libro del Momento: <em>¿Qué es la filosofía?</em></h3>
    <h4>Gilles Deleuze & Félix Guattari</h4>
    <p>Un manual de instrucciones para construir armas conceptuales que nadie, incluyéndote a ti mismo, sabrá cómo usar. Deleuze y Guattari no preguntan '¿Qué es la filosofía?' para obtener una respuesta, sino para desmantelar la pregunta hasta que solo queden fragmentos de alta velocidad—caos, cerebro y conceptos. La lectura es como un electroshock para el alma: dolorosa, probablemente innecesaria, pero te deja con la certeza de que <em>algo</em> ha cambiado. Ideal para cualquiera que sospeche que pensar no debería ser un acto confortable.</p>
  </div>

  <!-- Contenido oculto de servicios -->
  <div id="service-contents" style="display:none">
    <div id="service-1-content">
      <h3>Transformación y Complejidad</h3>
      <ul>
        <li>Diagnóstico con Cynefin, Wardley Maps y Estuarine Mapping.</li>
        <li>Portafolio de experimentos → aprendizaje → escalado.</li>
        <li>Gobernanza ligera y métricas orientadas a decisiones.</li>
      </ul>
    </div>
    <div id="service-2-content">
      <h3>Talento Estratégico</h3>
      <ul>
        <li>Headhunting orientado a estrategia futura (6–12 meses).</li>
        <li>Scorecards, accountability y ramp-up acelerado.</li>
        <li>Roles críticos: FP&A, BESS, liderazgo de transformación.</li>
      </ul>
    </div>
    <div id="service-3-content">
      <h3>Aceleración y Colisión</h3>
      <ul>
        <li>Collision Labs para romper inercias y visibilizar fricciones.</li>
        <li>Intervenciones cortas de alta energía con seguimiento.</li>
        <li>Diseño de decisiones irreversibles y reversibles (Type 1/2).</li>
      </ul>
    </div>
    <div id="service-4-content">
      <h3>Productos Intelectuales</h3>
      <ul>
        <li>Playbooks reutilizables, modelos de decisión y plantillas.</li>
        <li>Software ligero para rituales y métricas.</li>
      </ul>
    </div>
    <div id="service-5-content">
      <h3>Educación y Desarrollo</h3>
      <ul>
        <li>Workshops ejecutivos basados en RPG y simulaciones.</li>
        <li>SEL aplicado a equipos: comunicación, liderazgo, cooperación.</li>
      </ul>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      /* Typewriter: respeta reduce-motion */
      const handleTypewriterEffect = () => {
        const el = document.getElementById('hero-title');
        if (!el) return;
        const media = window.matchMedia('(prefers-reduced-motion: reduce)');
        const text = el.textContent;
        el.textContent = '';
        el.classList.add('typing');
        let i = 0;
        const type = () => {
          if (i < text.length) {
            el.textContent += text.charAt(i++);
            setTimeout(type, media.matches ? 0 : 70);
          } else {
            el.classList.remove('typing');
          }
        };
        setTimeout(type, media.matches ? 0 : 500);
      };

      /* Notas al pie: mouse, teclado y touch */
      const handleFootnotes = () => {
        const mainDisplay = document.getElementById('footnote-display');
        const bismarckDisplay = document.getElementById('bismarck-footnote-display');
        const contents = document.querySelectorAll('#footnote-contents p');
        const footnoteMap = new Map();
        contents.forEach(p => footnoteMap.set(p.dataset.footnote, p.innerHTML));

        const show = (key) => {
          const inBismarck = !document.getElementById('bismarck-page').classList.contains('hidden');
          const displayEl = inBismarck ? bismarckDisplay : mainDisplay;
          if (displayEl && footnoteMap.has(key)) displayEl.innerHTML = `<strong>[${key}]</strong> ${footnoteMap.get(key)}`;
        };
        const clear = () => {
          if (mainDisplay) mainDisplay.innerHTML = '';
          if (bismarckDisplay) bismarckDisplay.innerHTML = '';
        };

        ['mouseover','focusin','click','touchstart'].forEach(ev => {
          document.body.addEventListener(ev, e => {
            if (e.target.classList && e.target.classList.contains('footnote-ref')) show(e.target.dataset.footnote);
          }, {passive:true});
        });
        ['mouseout','focusout'].forEach(ev => {
          document.body.addEventListener(ev, e => {
            if (e.target.classList && e.target.classList.contains('footnote-ref')) clear();
          });
        });
      };

      /* Servicios: inyecta contenido */
      const handleServicesPanel = () => {
        const menuItems = document.querySelectorAll('.services-menu a');
        const panel = document.querySelector('.service-panel');
        const contents = document.querySelectorAll('#service-contents > div');
        const serviceMap = new Map();
        contents.forEach(div => serviceMap.set(div.id, div.innerHTML));

        menuItems.forEach(item => {
          item.addEventListener('click', (e) => {
            e.preventDefault();
            menuItems.forEach(i => i.classList.remove('active'));
            item.classList.add('active');

            const targetId = item.dataset.serviceTarget + '-content';
            if (panel && serviceMap.has(targetId)) {
              panel.innerHTML = `<div class="service-panel-content">${serviceMap.get(targetId)}</div>`;
              panel.classList.add('active');
            }
          });
        });

        if (menuItems.length > 0) menuItems[0].click();
      };

      /* Navegación principal ↔ Bismarck sin duplicar listeners */
      let bismarckTabsInit = false;
      const handlePageNavigation = () => {
        const mainContent = document.getElementById('main-content');
        const bismarckPage = document.getElementById('bismarck-page');
        const bismarckLink = document.getElementById('bismarck-nav-link');
        const bismarckBackBtn = document.getElementById('bismarck-back-btn');
        const mainFootnotes = document.getElementById('footnotes');
        const bismarckFootnotes = document.getElementById('bismarck-footnotes');

        const showBismarck = () => {
          mainContent.classList.add('hidden');
          mainFootnotes.classList.add('hidden');
          bismarckPage.classList.remove('hidden');
          bismarckFootnotes.classList.remove('hidden');
          window.scrollTo(0, 0);
          if (!bismarckTabsInit) { handleBismarckTabs(); bismarckTabsInit = true; }
        };

        const showMain = () => {
          bismarckPage.classList.add('hidden');
          bismarckFootnotes.classList.add('hidden');
          mainContent.classList.remove('hidden');
          mainFootnotes.classList.remove('hidden');
          window.scrollTo(0, 0);
        };

        bismarckLink.addEventListener('click', (e) => { e.preventDefault(); showBismarck(); });
        bismarckBackBtn.addEventListener('click', (e) => { e.preventDefault(); showMain(); });
      };

      /* Modal accesible con Escape y foco básico */
      const handleModal = () => {
        const mainModal = document.getElementById('main-modal');
        if (!mainModal) return;
        const mainModalBody = mainModal.querySelector('.modal-body');
        const mainCloseBtn = mainModal.querySelector('.modal-close-btn');
        let lastFocus = null;

        const openModal = (contentHTML) => {
          lastFocus = document.activeElement;
          mainModalBody.innerHTML = contentHTML;
          mainModal.classList.add('active');
          mainModal.setAttribute('aria-hidden', 'false');
          document.body.classList.add('modal-open');
          mainCloseBtn.focus();

          const trap = (e) => { if (e.key === 'Escape') closeModal(); };
          mainModal.addEventListener('keydown', trap);
          mainModal._trap = trap;
        };

        const closeModal = () => {
          mainModal.classList.remove('active');
          mainModal.setAttribute('aria-hidden', 'true');
          document.body.classList.remove('modal-open');
          if (mainModal._trap) mainModal.removeEventListener('keydown', mainModal._trap);
          if (lastFocus) lastFocus.focus();
        };

        document.getElementById('book-nav-link').addEventListener('click', (e) => {
          e.preventDefault();
          const src = document.getElementById('book-modal-content');
          openModal(src ? src.innerHTML : '<p>Sin contenido.</p>');
        });

        mainCloseBtn.addEventListener('click', closeModal);
        mainModal.addEventListener('click', (e) => { if (e.target === mainModal) closeModal(); });
      };

      /* Tabs Bismarck con ARIA */
      const handleBismarckTabs = () => {
        const tabs = document.querySelectorAll('.bismarck-tab');
        const panels = document.querySelectorAll('.bismarck-panel');

        tabs.forEach(tab => {
          tab.setAttribute('role','tab');
          tab.setAttribute('aria-selected','false');
          const id = tab.dataset.bismarckTab;
          tab.setAttribute('aria-controls', `panel-${id}`);
        });
        panels.forEach(p => {
          const id = p.getAttribute('data-bismarck-panel');
          p.setAttribute('role','tabpanel');
          p.id = `panel-${id}`;
          p.setAttribute('tabindex','0');
        });

        const activate = (tab) => {
          tabs.forEach(t => { t.classList.remove('active'); t.setAttribute('aria-selected','false'); });
          panels.forEach(p => p.classList.remove('active'));
          tab.classList.add('active');
          tab.setAttribute('aria-selected','true');
          const target = document.querySelector(`.bismarck-panel[data-bismarck-panel="${tab.dataset.bismarckTab}"]`);
          if (target) target.classList.add('active');
        };

        tabs.forEach(tab => tab.addEventListener('click', () => activate(tab)));
        if (tabs.length) activate(tabs[0]);
      };

      /* Modal de imagen con Escape */
      const handleImageModal = () => {
        const imageModal = document.getElementById('image-modal');
        if (!imageModal) return;

        const imageEl = imageModal.querySelector('img');
        const closeBtn = imageModal.querySelector('.modal-close-btn');

        document.body.addEventListener('click', (e) => {
          if (e.target && e.target.matches('.bismarck-gallery-image')) {
            imageEl.src = e.target.src;
            imageModal.classList.add('active');
            imageModal.setAttribute('aria-hidden','false');
            document.body.classList.add('modal-open');
            closeBtn.focus();
          }
        });

        const closeImageModal = () => {
          imageModal.classList.remove('active');
          imageModal.setAttribute('aria-hidden','true');
          document.body.classList.remove('modal-open');
        };

        closeBtn.addEventListener('click', closeImageModal);
        imageModal.addEventListener('click', (e) => { if (e.target === imageModal) closeImageModal(); });
        document.addEventListener('keydown', (e)=>{ if(imageModal.classList.contains('active') && e.key==='Escape'){ closeImageModal(); }});
      };

      /* Formulario contacto con validación básica */
      const handleContactForm = () => {
        const form = document.getElementById('contact-form');
        if (!form) return;
        const previewBtn = document.getElementById('preview-btn');

        const validEmail = (e) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);

        const buildMailtoLink = () => {
          const name = form.nombre.value.trim();
          const email = form.email.value.trim();
          const msg = form.mensaje.value.trim();
          const verticals = Array.from(form.querySelectorAll('input[name="vertical"]:checked')).map(cb => `- ${cb.value}`).join('\n');
          let body = `Hola,\n\nMi nombre es ${name} (${email}).\n\n`;
          if (verticals) body += `Estoy interesado/a en:\n${verticals}\n\n`;
          if (msg) body += `Mi mensaje es:\n"${msg}"\n`;
          return `mailto:eduardo@officequest.net?subject=${encodeURIComponent("Cafecito — Portafolio")}&body=${encodeURIComponent(body)}`;
        };

        previewBtn.addEventListener('click', () => {
          const name = form.nombre.value.trim();
          const email = form.email.value.trim();
          if (!name || !validEmail(email)) { alert('Completa nombre y un email válido.'); return; }
          window.location.href = buildMailtoLink();
        });

        form.addEventListener('submit', (e) => {
          e.preventDefault();
          const name = form.nombre.value.trim();
          const email = form.email.value.trim();
          if (!name || !validEmail(email)) { alert('Completa nombre y un email válido.'); return; }
          window.location.href = buildMailtoLink();
        });
      };

      /* Evitar saltos de enlaces "#" sin controlador */
      document.addEventListener('click', (e) => {
        const a = e.target.closest && e.target.closest('a[href="#"]');
        if (a) e.preventDefault();
      });

      /* Konami funcional (normalizado) */
      const handleKonamiCode = () => {
        const seq = ['arrowup','arrowup','arrowdown','arrowdown','arrowleft','arrowright','arrowleft','arrowright','b','a'];
        let i = 0;
        document.addEventListener('keydown', e => {
          const k = e.key.toLowerCase();
          i = (k === seq[i]) ? i + 1 : (k === seq[0] ? 1 : 0);
          if (i === seq.length) {
            console.log("%c¡Código Konami activado!", "color:#008080;font-size:20px;font-weight:bold;font-family:'Courier New',monospace");
            i = 0;
          }
        });
      };

      handleTypewriterEffect();
      handleFootnotes();
      handleServicesPanel();
      handleModal();
      handlePageNavigation();
      handleImageModal();
      handleContactForm();
      handleKonamiCode();
    });
  </script>
</body>
</html>
```
